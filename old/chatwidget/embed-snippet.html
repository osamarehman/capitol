<!--
    CHAT WIDGET EMBED SNIPPET
    ==========================
    Copy this snippet into your client's website, right before the closing </body> tag.
    Update the configuration with client-specific settings.
-->

<!-- Chat Widget Styles -->
<link rel="stylesheet" href="https://YOUR-CDN-URL/chatwidget/branding.css">
<link rel="stylesheet" href="https://YOUR-CDN-URL/chatwidget/chat-widget.css">

<!-- Chat Widget HTML -->
<div id="custom-chat-widget" class="chat-widget">
    <button class="chat-widget__toggle" id="chatToggle">
        <svg class="chat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
        <svg class="close-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
    </button>
    <div class="chat-widget__window" id="chatWindow">
        <div class="chat-widget__header">
            <div class="chat-widget__header-profile">
                <img src="" alt="Bot" class="chat-widget__bot-avatar" id="botAvatar">
                <div class="chat-widget__header-info">
                    <h3 class="chat-widget__bot-name" id="botName">Sarah</h3>
                    <p class="chat-widget__status">Online</p>
                </div>
            </div>
            <button class="chat-widget__minimize" id="minimizeBtn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
            </button>
        </div>
        <div class="chat-widget__quick-actions" id="quickActions"></div>
        <div class="chat-widget__messages" id="messagesContainer">
            <div class="chat-message chat-message--bot">
                <img src="" alt="Bot" class="chat-message__avatar" id="welcomeBotAvatar">
                <div class="chat-message__content">
                    <div class="chat-message__bubble">
                        <p class="chat-message__text">Hello! How can I help you today?</p>
                        <span class="chat-message__time"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="chat-widget__typing" id="typingIndicator" style="display: none;">
            <img src="" alt="Bot" class="chat-message__avatar" id="typingBotAvatar">
            <div class="typing-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        <div class="chat-widget__input-area">
            <div class="chat-widget__input-wrapper">
                <button class="chat-widget__attach-btn" id="attachBtn" title="Attach file">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
                    </svg>
                </button>
                <input type="file" id="fileInput" multiple accept="image/*,video/*,audio/*,application/pdf,.doc,.docx" style="display: none;">
                <textarea class="chat-widget__input" id="messageInput" placeholder="Type your message..." rows="1"></textarea>
                <button class="chat-widget__send-btn" id="sendBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                    </svg>
                </button>
            </div>
            <div class="chat-widget__file-preview" id="filePreview" style="display: none;"></div>
        </div>
    </div>
</div>

<!-- Chat Widget Script -->
<script src="https://YOUR-CDN-URL/chatwidget/chat-widget.js"></script>

<!-- Configuration Script -->
<script>
    ChatWidget.init({
        // ========================================
        // REQUIRED: Replace with your webhook URL
        // ========================================
        webhookUrl: 'https://your-n8n-instance.com/webhook/your-webhook-id',

        // ========================================
        // BRANDING CUSTOMIZATION
        // ========================================
        botName: 'Capitol Assistant',
        botAvatar: 'https://your-domain.com/images/bot-avatar.png',

        // Colors (use your brand colors)
        primaryColor: '#00203b',    // Header and buttons
        secondaryColor: '#f1f3f4',  // Background elements
        userColor: '#dcf8c6',       // User message bubbles (WhatsApp green)
        botColor: '#ffffff',        // Bot message bubbles

        // Optional: Use same color with different opacity
        // sameColorBubbles: true,

        // ========================================
        // QUICK ACTION BUTTONS
        // ========================================
        quickActions: [
            {
                id: 'quote',
                label: 'Get a Quote',
                icon: 'üí∞',
                instruction: 'I need a quote for my project. Please help me understand pricing and collect the information needed for an accurate estimate.'
            },
            {
                id: 'inspection',
                label: 'Schedule Inspection',
                icon: 'üîç',
                instruction: 'I would like to schedule an inspection. Please help me find available times and collect my contact information.'
            },
            {
                id: 'agent',
                label: 'Talk to Agent',
                icon: 'üë§',
                instruction: 'I need to speak with a human agent. Please connect me to someone from your team.'
            }
        ],

        // ========================================
        // OTHER OPTIONS
        // ========================================
        welcomeMessage: 'Hello! How can I help you today?',
        enableFileUpload: true,
        maxFileSize: 10 * 1024 * 1024, // 10MB

        // Webhook field customization (default: 'chatInput' for n8n compatibility)
        // messageFieldName: 'chatInput', // Change to 'message' or 'prompt' if your webhook expects different field name

        debug: false // Set to true for development
    });
</script>

<!--
    INTEGRATION NOTES:
    ==================
    1. Replace YOUR-CDN-URL with your actual CDN or hosting URL
    2. Update webhookUrl with your n8n webhook endpoint
    3. Customize branding colors to match client's website
    4. Adjust quick action buttons based on client's needs
    5. Test on both desktop and mobile devices

    WEBHOOK REQUEST FORMAT:
    =======================
    The widget sends user messages in a field called "chatInput" by default (n8n compatible).
    If your webhook expects a different field name, set messageFieldName in the config.

    WEBHOOK RESPONSE FORMAT:
    ========================
    Your webhook should return JSON:
    {
        "response": "AI's response message here"
    }

    OR

    {
        "message": "AI's response message here"
    }
-->
